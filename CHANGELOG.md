# üìù Changelog - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prisma/PostgreSQL

## üéØ –¶–µ–ª—å
–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—É —Å in-memory –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Å Prisma ORM –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ —á–µ—Å—Ç–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### üîß WebSocket —Å–µ—Ä–≤–µ—Ä (ws-server.js)
**–ë—ã–ª–æ:** In-memory –±–∞–ª–∞–Ω—Å—ã –∏ –∏—Å—Ç–æ—Ä–∏—è
**–°—Ç–∞–ª–æ:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prisma/PostgreSQL

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ò–º–ø–æ—Ä—Ç –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PrismaClient
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `getSessionHistory()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ –ë–î
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ GameSession –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Å—Å–∏–∏ (waiting ‚Üí playing ‚Üí crashed)
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Å—Ç–∞–≤–æ–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ cashout —Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º –≤—ã–∏–≥—Ä—ã—à–∞
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram —Å upsert –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞ –≤ –ë–î
- ‚úÖ Graceful shutdown —Å –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º Prisma

#### –£–¥–∞–ª–µ–Ω–æ:
- ‚ùå In-memory –±–∞–ª–∞–Ω—Å—ã (`balances` –æ–±—ä–µ–∫—Ç)
- ‚ùå In-memory –∏—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–∏ (`sessionHistory` –º–∞—Å—Å–∏–≤)
- ‚ùå –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ —Å—Ç–∞–≤–æ–∫ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫

### üéÆ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

#### CrashGameArea.tsx:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `sessionId` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π WebSocket
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameHistory`
- ‚úÖ –°–±—Ä–æ—Å —Å—Ç–∞–≤–æ–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∞–∑—ã –∏–≥—Ä—ã
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ –∏ –≤—ã–≤–æ–¥–æ–≤ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è

#### CrashBetControls.tsx:
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞–≤–æ–∫
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç–∞–≤–∫–∏
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª —Å 2 –∑–Ω–∞–∫–∞–º–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UX —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### useLobbySocket.ts:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `sendCashout`
- ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `balance-update` —Å–æ–±—ã—Ç–∏–π

#### GameHistory.tsx (–Ω–æ–≤—ã–π):
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ–±–µ–¥–∞/–ø–æ—Ä–∞–∂–µ–Ω–∏–µ)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏:
- ‚úÖ **User**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –±–∞–ª–∞–Ω—Å—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ **Game**: –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä, —Å—Ç–∞–≤–∫–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ **GameSession**: –ò–≥—Ä–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏ —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏
- ‚úÖ **Transaction**: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–∏–≥—Ä—ã, –¥–µ–ø–æ–∑–∏—Ç—ã, –≤—ã–≤–æ–¥—ã)
- ‚úÖ **ChatMessage**: –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞

#### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
- ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–∞–≤–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π Game –∏ Transaction
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üì¶ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### package.json:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `ws` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ WebSocket —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `test-ws` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω QUICK_START.md –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω CHANGELOG.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- ‚úÖ –°–æ–∑–¥–∞–Ω test-ws.js –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ WebSocket
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —Å–æ–±—ã—Ç–∏–π

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏–≥—Ä—ã —Ç–µ–ø–µ—Ä—å:

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è/–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ë–î
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏**: –ù–æ–≤–∞—è GameSession —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'waiting'
3. **–°—Ç–∞–≤–∫–∏**: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–ø–∏—Å—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å, —Å–æ–∑–¥–∞–µ—Ç Game –∑–∞–ø–∏—Å—å
4. **–ü–æ–ª–µ—Ç**: –°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏ 'playing', –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è crashPoint
5. **Cashout**: –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è Game.cashout, –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –≤—ã–∏–≥—Ä—ã—à
6. **–ö—Ä–∞—à**: –°—Ç–∞—Ç—É—Å 'crashed', –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Å—Ç–∞–≤–∫–∏ —Å–µ—Å—Å–∏–∏
7. **–ò—Å—Ç–æ—Ä–∏—è**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ:
- ‚ùå –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- ‚ùå –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä
- ‚ùå –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚ùå –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚ùå –ù–µ—Ç –∞–¥–º–∏–Ω–∫–∏

### –ü–æ—Å–ª–µ:
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –ì–æ—Ç–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. 